<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AB InBev Commodity Hedging Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-bottom: 30px;
        }

        .header h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s;
        }

        .metric-card:hover {
            transform: translateY(-5px);
        }

        .metric-label {
            color: #999;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .metric-value {
            font-size: 2.2em;
            font-weight: bold;
            color: #333;
        }

        .metric-change {
            font-size: 0.95em;
            margin-top: 8px;
        }

        .positive {
            color: #10b981;
        }

        .negative {
            color: #ef4444;
        }

        .neutral {
            color: #f59e0b;
        }

        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            margin-bottom: 25px;
        }

        .chart-title {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .recommendation-card {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            margin-bottom: 25px;
        }

        .recommendation-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .recommendation-icon {
            font-size: 3em;
        }

        .recommendation-text h2 {
            color: #333;
            font-size: 1.8em;
            margin-bottom: 5px;
        }

        .recommendation-text p {
            color: #666;
            font-size: 1.1em;
        }

        .savings-box {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
            text-align: center;
        }

        .savings-box h3 {
            font-size: 1.2em;
            margin-bottom: 5px;
        }

        .savings-box .amount {
            font-size: 2.5em;
            font-weight: bold;
        }

        .controls {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            margin-bottom: 25px;
        }

        .control-group {
            margin-bottom: 20px;
        }

        .control-group label {
            display: block;
            color: #333;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .control-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1em;
            background: white;
            cursor: pointer;
        }

        .control-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }

        button:hover {
            transform: scale(1.05);
        }

        .info-box {
            background: #eff6ff;
            border-left: 4px solid #3b82f6;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
        }

        .info-box p {
            color: #1e40af;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸŒ¾ AB InBev Commodity Hedging Dashboard</h1>
            <p>Production Time Series Forecasting with T-Policy Recommendations</p>
        </div>

        <div class="controls">
            <h2 style="margin-bottom: 20px; color: #333;">ðŸ“Š Select Commodity</h2>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div class="control-group">
                    <label>Commodity</label>
                    <select id="commodity-select">
                        <option value="corn_cbot">Corn (CBOT)</option>
                        <option value="corn_bmf">Corn (BMF - Brazil)</option>
                        <option value="wheat">Wheat</option>
                        <option value="barley">Barley</option>
                        <option value="diesel">Diesel</option>
                    </select>
                </div>
                <div class="control-group">
                    <label>Contract Volume</label>
                    <select id="volume-select">
                        <option value="500000">500,000 bushels</option>
                        <option value="1000000" selected>1,000,000 bushels</option>
                        <option value="2000000">2,000,000 bushels</option>
                        <option value="5000000">5,000,000 bushels</option>
                    </select>
                </div>
            </div>
            <button onclick="updateDashboard()" style="width: 100%; margin-top: 15px;">
                ðŸ”„ Update Forecast
            </button>
        </div>

        <div class="metrics">
            <div class="metric-card">
                <div class="metric-label">Current Spot Price</div>
                <div class="metric-value">$<span id="current-price">4.02</span></div>
                <div class="metric-change"><span id="price-change">+2.3% vs last month</span></div>
            </div>
            <div class="metric-card">
                <div class="metric-label">30-Day Forecast</div>
                <div class="metric-value">$<span id="forecast-30">4.15</span></div>
                <div class="metric-change positive"><span id="trend-30">â†‘ +3.2%</span></div>
            </div>
            <div class="metric-card">
                <div class="metric-label">90-Day Forecast</div>
                <div class="metric-value">$<span id="forecast-90">4.28</span></div>
                <div class="metric-change positive"><span id="trend-90">â†‘ +6.5%</span></div>
            </div>
            <div class="metric-card">
                <div class="metric-label">Forecast Accuracy</div>
                <div class="metric-value"><span id="accuracy">96.2</span>%</div>
                <div class="metric-change">MAPE: <span id="mape">3.8%</span></div>
            </div>
        </div>

        <div class="recommendation-card">
            <div class="recommendation-header">
                <div class="recommendation-icon" id="rec-icon">ðŸ”´</div>
                <div class="recommendation-text">
                    <h2 id="rec-title">LOCK CONTRACTS NOW</h2>
                    <p id="rec-reason">Prices forecasted to rise 6.5% in next 90 days</p>
                </div>
            </div>
            
            <div class="info-box">
                <p><strong>T-Policy Analysis:</strong> Current timing is T-0 (on schedule). Based on forecast, locking contracts today (T-0) will maximize savings compared to waiting until T+1 or T+2. Price trend is strongly upward.</p>
            </div>

            <div class="savings-box" id="savings-box">
                <h3>Expected Savings</h3>
                <div class="amount">$<span id="savings-amount">260,000</span></div>
                <p style="margin-top: 10px; opacity: 0.9;">Based on <span id="contract-volume">1,000,000</span> bushel contract</p>
            </div>
        </div>

        <div class="chart-container">
            <div class="chart-title">ðŸ“ˆ 90-Day Price Forecast with T-Policy Timeline</div>
            <div id="forecast-chart"></div>
        </div>

        <div class="chart-container">
            <div class="chart-title">ðŸ“Š Spot vs Future Price Comparison</div>
            <div id="spot-future-chart"></div>
        </div>

        <div class="chart-container">
            <div class="chart-title">ðŸŽ¯ Model Performance Comparison</div>
            <div id="model-comparison-chart"></div>
        </div>

        <div class="chart-container">
            <div class="chart-title">ðŸ“‰ Historical Price Trends (5 Years)</div>
            <div id="historical-chart"></div>
        </div>
    </div>

    <script>
        // Simulated data - in production, this would come from API
        function generateForecastData() {
            const dates = [];
            const actualPrices = [];
            const forecastPrices = [];
            const confidenceUpper = [];
            const confidenceLower = [];
            
            const today = new Date();
            const basePrice = 4.02;
            
            // Historical (30 days)
            for (let i = -30; i < 0; i++) {
                const date = new Date(today);
                date.setDate(date.getDate() + i);
                dates.push(date.toISOString().split('T')[0]);
                actualPrices.push(basePrice + Math.random() * 0.2 - 0.1);
            }
            
            // Forecast (90 days)
            for (let i = 0; i <= 90; i++) {
                const date = new Date(today);
                date.setDate(date.getDate() + i);
                dates.push(date.toISOString().split('T')[0]);
                
                // Trending upward forecast
                const forecast = basePrice + (i / 90) * 0.26 + Math.random() * 0.05;
                actualPrices.push(null);
                forecastPrices.push(forecast);
                confidenceUpper.push(forecast + 0.1 + (i / 90) * 0.1);
                confidenceLower.push(forecast - 0.1 - (i / 90) * 0.1);
            }
            
            return { dates, actualPrices, forecastPrices, confidenceUpper, confidenceLower };
        }

        function createForecastChart() {
            const data = generateForecastData();
            
            const trace1 = {
                x: data.dates.slice(0, 30),
                y: data.actualPrices.slice(0, 30),
                type: 'scatter',
                mode: 'lines',
                name: 'Historical Prices',
                line: { color: '#3b82f6', width: 3 }
            };
            
            const trace2 = {
                x: data.dates.slice(30),
                y: data.forecastPrices.slice(30),
                type: 'scatter',
                mode: 'lines',
                name: 'Forecast (SARIMA)',
                line: { color: '#10b981', width: 3, dash: 'dot' }
            };
            
            const trace3 = {
                x: data.dates.slice(30),
                y: data.confidenceUpper.slice(30),
                type: 'scatter',
                mode: 'lines',
                name: '95% Confidence Upper',
                line: { color: 'rgba(16, 185, 129, 0.3)', width: 0 },
                showlegend: false
            };
            
            const trace4 = {
                x: data.dates.slice(30),
                y: data.confidenceLower.slice(30),
                type: 'scatter',
                mode: 'lines',
                name: '95% Confidence Lower',
                line: { color: 'rgba(16, 185, 129, 0.3)', width: 0 },
                fill: 'tonexty',
                fillcolor: 'rgba(16, 185, 129, 0.2)',
                showlegend: false
            };
            
            const layout = {
                height: 450,
                margin: { t: 20, r: 40, b: 60, l: 60 },
                xaxis: { 
                    title: 'Date',
                    gridcolor: '#f3f4f6'
                },
                yaxis: { 
                    title: 'Price ($/bushel)',
                    gridcolor: '#f3f4f6'
                },
                hovermode: 'x unified',
                paper_bgcolor: 'white',
                plot_bgcolor: 'white',
                shapes: [
                    {
                        type: 'rect',
                        xref: 'paper',
                        yref: 'paper',
                        x0: 0.66,
                        y0: 0,
                        x1: 1,
                        y1: 1,
                        fillcolor: 'rgba(239, 68, 68, 0.1)',
                        line: { width: 0 }
                    }
                ],
                annotations: [
                    {
                        x: data.dates[30],
                        y: data.forecastPrices[30],
                        text: 'T-0<br>Today',
                        showarrow: true,
                        arrowhead: 2,
                        ax: 0,
                        ay: -40
                    },
                    {
                        x: data.dates[60],
                        y: data.forecastPrices[60],
                        text: 'T+1<br>+30 days',
                        showarrow: true,
                        arrowhead: 2,
                        ax: 0,
                        ay: -40
                    },
                    {
                        x: data.dates[90],
                        y: data.forecastPrices[90],
                        text: 'T+2<br>+60 days',
                        showarrow: true,
                        arrowhead: 2,
                        ax: 0,
                        ay: -40
                    }
                ]
            };
            
            Plotly.newPlot('forecast-chart', [trace4, trace3, trace1, trace2], layout, {responsive: true});
        }

        function createSpotFutureChart() {
            const dates = [];
            const spotPrices = [];
            const futurePrices = [];
            
            for (let i = 0; i < 60; i++) {
                const date = new Date();
                date.setDate(date.getDate() - 60 + i);
                dates.push(date.toISOString().split('T')[0]);
                const spot = 4.0 + Math.sin(i / 10) * 0.3 + Math.random() * 0.1;
                spotPrices.push(spot);
                futurePrices.push(spot * 1.035);  // 3.5% premium
            }
            
            const trace1 = {
                x: dates,
                y: spotPrices,
                type: 'scatter',
                mode: 'lines',
                name: 'Spot Price',
                line: { color: '#3b82f6', width: 2 }
            };
            
            const trace2 = {
                x: dates,
                y: futurePrices,
                type: 'scatter',
                mode: 'lines',
                name: '3-Month Future',
                line: { color: '#10b981', width: 2 }
            };
            
            const layout = {
                height: 350,
                margin: { t: 20, r: 40, b: 60, l: 60 },
                xaxis: { title: 'Date', gridcolor: '#f3f4f6' },
                yaxis: { title: 'Price ($/bushel)', gridcolor: '#f3f4f6' },
                hovermode: 'x unified',
                paper_bgcolor: 'white',
                plot_bgcolor: 'white'
            };
            
            Plotly.newPlot('spot-future-chart', [trace1, trace2], layout, {responsive: true});
        }

        function createModelComparisonChart() {
            const models = ['Naive', 'Moving Avg', 'ARIMA', 'SARIMA', 'XGBoost'];
            const mae = [0.25, 0.22, 0.18, 0.15, 0.16];
            const rmse = [0.35, 0.31, 0.26, 0.22, 0.23];
            const mape = [6.2, 5.8, 4.5, 3.8, 4.1];
            
            const trace1 = {
                x: models,
                y: mape,
                type: 'bar',
                name: 'MAPE (%)',
                marker: { color: ['#94a3b8', '#94a3b8', '#3b82f6', '#10b981', '#f59e0b'] }
            };
            
            const layout = {
                height: 350,
                margin: { t: 20, r: 40, b: 60, l: 60 },
                xaxis: { title: 'Model' },
                yaxis: { title: 'MAPE (%) - Lower is Better', gridcolor: '#f3f4f6' },
                paper_bgcolor: 'white',
                plot_bgcolor: 'white'
            };
            
            Plotly.newPlot('model-comparison-chart', [trace1], layout, {responsive: true});
        }

        function createHistoricalChart() {
            const dates = [];
            const prices = [];
            
            for (let i = 0; i < 365 * 5; i++) {
                const date = new Date();
                date.setDate(date.getDate() - 365 * 5 + i);
                dates.push(date.toISOString().split('T')[0]);
                
                // Seasonal pattern + trend + noise
                const trend = 3.5 + (i / (365 * 5)) * 0.8;
                const seasonal = Math.sin((i / 365) * 2 * Math.PI) * 0.3;
                const noise = Math.random() * 0.2 - 0.1;
                prices.push(trend + seasonal + noise);
            }
            
            const trace = {
                x: dates,
                y: prices,
                type: 'scatter',
                mode: 'lines',
                name: 'Historical Prices',
                line: { color: '#667eea', width: 1.5 }
            };
            
            const layout = {
                height: 350,
                margin: { t: 20, r: 40, b: 60, l: 60 },
                xaxis: { title: 'Date', gridcolor: '#f3f4f6' },
                yaxis: { title: 'Price ($/bushel)', gridcolor: '#f3f4f6' },
                paper_bgcolor: 'white',
                plot_bgcolor: 'white'
            };
            
            Plotly.newPlot('historical-chart', [trace], layout, {responsive: true});
        }

        function updateDashboard() {
            const commodity = document.getElementById('commodity-select').value;
            const volume = parseInt(document.getElementById('volume-select').value);
            
            // Simulate API call - in production, fetch real predictions
            console.log(`Updating dashboard for ${commodity}, volume: ${volume}`);
            
            // Update metrics (simulated)
            const currentPrice = (3.8 + Math.random() * 0.5).toFixed(2);
            const forecast30 = (parseFloat(currentPrice) * 1.03).toFixed(2);
            const forecast90 = (parseFloat(currentPrice) * 1.065).toFixed(2);
            
            document.getElementById('current-price').textContent = currentPrice;
            document.getElementById('forecast-30').textContent = forecast30;
            document.getElementById('forecast-90').textContent = forecast90;
            
            const savings = ((forecast90 - currentPrice) * volume).toFixed(0);
            document.getElementById('savings-amount').textContent = savings.toLocaleString();
            document.getElementById('contract-volume').textContent = volume.toLocaleString();
            
            // Refresh charts
            createForecastChart();
        }

        // Initialize dashboard
        window.onload = function() {
            createForecastChart();
            createSpotFutureChart();
            createModelComparisonChart();
            createHistoricalChart();
        };
    </script>
</body>
</html>
